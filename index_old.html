<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <title>BMI Calculator</title>
        <script src="src/person.js"></script>
        <script src="src/calculator.js"></script>        
    </head>
    <body>
            <script type="text/javascript">
                const global = {}
                
                global.calculateForm = document.querySelector('#calculate');
                global.displayValueElement = document.querySelector('#display_value');
                global.displayMessageElement = document.querySelector('#display_message');
                //    methodSelectElement = document.getElementById('mySelect');
                //    calculateForm = document.getElementById('calculate');
                //   metricInputs = document.getElementById('metric-input');
                //    imperialInputs = document.getElementById('imperial-input');
                //    displayValueElement = document.getElementById('display_value');
                //    displayMessageElement = document.getElementById('display_message');
        
                //    calculationMethod = 'metric'
        
                //    metricInputs.style.display = '';
                //    imperialInputs.style.display = 'none';
                    document.addEventListener('DOMContentLoaded', () => {
                        global.calculateForm.addEventListener('submit', event => {
                            event.preventDefault();
                            calculateBMI()
                                .then(person => {
                                    global.displayValueElement.innerHTML = `Your BMI is ${person.bmiValue}`;
                                    global.displayMessageElement.innerHTML = `and you are ${person.bmiMessage}`;
                                })
                        })
                    });
                //    document.addEventListener('DOMContentLoaded', () => {
                        
                //        methodSelectElement.addEventListener('change', event => {    
                //            switchCalculationMethod(event.target.value);
                //    });
                    const calculateBMI = () => {
                        return new Promise(resolve => {
                            let w = parseFloat(document.getElementById('weight-in-kgs').value);
                            let h = parseFloat(document.getElementById('height-in-cm').value);
                            let person = new Person({
                                weight: w,
                                height: h,
                            });
                            person.calculate_bmi_metric();
                            resolve(person);
                        })
                    };
                //    calculateForm.addEventListener('submit', event => {
                //        event.preventDefault();
                //        calculateBMI(selectElement)
                //            .then(person => {
                //                displayValueElement.innerHTML = 'Your BMI is ${person.bmiValue}';
                //                displayMessageElement.innerHTML = 'and you are ${person.bmiMessage}';
                //            })
                //    })
                //})
                </script>
        <form id="calculate">
            <div id="metric-inputs">
                <input type="text" id="weight-in-kgs" placeholder="Weight in kg">
                <input type="text" id="height-in-cm" placeholder="Height in cm"
            </div>
            <input type="submit" value="Calculate">

        <!--    <input type="text" id="weight-in-kgs" placeholder="Weight in kg.">
            <input type="text" id="height-in-cm" placeholder="Height in cm.">
            <input type="button" id="calculate" value="Calculate BMI"> -->
        </form>
        <div>
            <span id="display_value"></span>
            <span id="display_message"></span>
        </div>
    </body>
</html>